# 实验室5 - Pthreads和Mutex

**文件结构**  
```
lab5/
├── lab5.1.c    # 练习1：多线程消息打印
├── lab5.2.c    # 练习2：线程协作（无同步）
├── lab5.3.c    # 练习3：线程协作（使用Mutex）
└── Makefile    # 构建脚本
```

## 实验目标
1. 理解多线程的基本概念和创建方法
2. 观察线程间共享资源的竞争条件
3. 学习使用互斥锁（Mutex）解决资源竞争问题

## 操作步骤

### 练习1：多线程消息打印
1. 编译程序：  
   ```bash
   make lab5.1
   ```
2. 运行程序：  
   ```bash
   ./lab5.1
   ```
3. 观察输出：20个线程按ID顺序打印消息（可能因调度顺序不同而乱序）

### 练习2：线程协作（无同步）
1. 编译程序：  
   ```bash
   make lab5.2
   ```
2. 运行程序：  
   ```bash
   ./lab5.2
   ```
3. 预期问题：最终计数器值小于200万（因线程竞争导致数据不一致）

### 练习3：线程协作（使用Mutex）
1. 编译程序：  
   ```bash
   make lab5.3
   ```
2. 运行程序：  
   ```bash
   ./lab5.3
   ```
3. 正确结果：计数器值稳定为200万（Mutex保护了共享资源）

## 关键代码片段
```c
// 互斥锁使用示例
pthread_mutex_lock(&mutex);
counter++;  // 临界区
pthread_mutex_unlock(&mutex);
```
